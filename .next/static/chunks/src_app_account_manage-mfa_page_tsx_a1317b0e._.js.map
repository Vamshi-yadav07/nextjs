{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/sripathivamshi/Desktop/clerk-related/clerk/src/app/account/manage-mfa/page.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport { useUser, useReverification } from '@clerk/nextjs'\nimport Link from 'next/link'\nimport { BackupCodeResource } from '@clerk/types'\n\n// If TOTP is enabled, provide the option to disable it\nconst TotpEnabled = () => {\n  const { user } = useUser()\n  const disableTOTP = useReverification(() => user?.disableTOTP())\n\n  return (\n    <div>\n      <p>\n        TOTP via authentication app enabled - <button onClick={() => disableTOTP()}>Remove</button>\n      </p>\n    </div>\n  )\n}\n\n// If TOTP is disabled, provide the option to enable it\nconst TotpDisabled = () => {\n  return (\n    <div>\n      <p>\n        Add TOTP via authentication app -{' '}\n        <Link href=\"/account/manage-mfa/add\">\n          <button>Add</button>\n        </Link>\n      </p>\n    </div>\n  )\n}\n\n// Generate and display backup codes\nexport function GenerateBackupCodes() {\n  const { user } = useUser()\n  const [backupCodes, setBackupCodes] = React.useState<BackupCodeResource | undefined>(undefined)\n  const createBackupCode = useReverification(() => user?.createBackupCode())\n\n  const [loading, setLoading] = React.useState(false)\n\n  React.useEffect(() => {\n    if (backupCodes) {\n      return\n    }\n\n    setLoading(true)\n    void createBackupCode()\n      .then((backupCode: BackupCodeResource | undefined) => {\n        setBackupCodes(backupCode)\n        setLoading(false)\n      })\n      .catch((err) => {\n        // See https://clerk.com/docs/guides/development/custom-flows/error-handling\n        // for more info on error handling\n        console.error(JSON.stringify(err, null, 2))\n        setLoading(false)\n      })\n  }, [])\n\n  if (loading) {\n    return <p>Loading...</p>\n  }\n\n  if (!backupCodes) {\n    return <p>There was a problem generating backup codes</p>\n  }\n\n  return (\n    <ol>\n      {backupCodes.codes.map((code, index) => (\n        <li key={index}>{code}</li>\n      ))}\n    </ol>\n  )\n}\n\nexport default function ManageMFA() {\n  const { isLoaded, isSignedIn, user } = useUser()\n  const [showNewCodes, setShowNewCodes] = React.useState(false)\n\n  if (!isLoaded) {\n    // Handle loading state\n    return null\n  }\n\n  if (!isSignedIn) {\n    // Handle signed out state\n    return <p>You must be logged in to access this page</p>\n  }\n\n  return (\n    <>\n      <h1>User MFA Settings</h1>\n\n      {/* Manage TOTP MFA */}\n      {user.totpEnabled ? <TotpEnabled /> : <TotpDisabled />}\n\n      {/* Manage backup codes */}\n      {user.backupCodeEnabled && user.twoFactorEnabled && (\n        <div>\n          <p>\n            Generate new backup codes? -{' '}\n            <button onClick={() => setShowNewCodes(true)}>Generate</button>\n          </p>\n        </div>\n      )}\n      {showNewCodes && (\n        <>\n          <GenerateBackupCodes />\n          <button onClick={() => setShowNewCodes(false)}>Done</button>\n        </>\n      )}\n    </>\n  )\n}"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;;;AAJA;;;;AAOA,uDAAuD;AACvD,MAAM,cAAc;;IAClB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0KAAO;IACxB,MAAM,cAAc,IAAA,oLAAiB;sDAAC,IAAM,iBAAA,2BAAA,KAAM,WAAW;;IAE7D,qBACE,6LAAC;kBACC,cAAA,6LAAC;;gBAAE;8BACqC,6LAAC;oBAAO,SAAS,IAAM;8BAAe;;;;;;;;;;;;;;;;;AAIpF;GAXM;;QACa,0KAAO;QACJ,oLAAiB;;;KAFjC;AAaN,uDAAuD;AACvD,MAAM,eAAe;IACnB,qBACE,6LAAC;kBACC,cAAA,6LAAC;;gBAAE;gBACiC;8BAClC,6LAAC,0KAAI;oBAAC,MAAK;8BACT,cAAA,6LAAC;kCAAO;;;;;;;;;;;;;;;;;;;;;;AAKlB;MAXM;AAcC,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,0KAAO;IACxB,MAAM,CAAC,aAAa,eAAe,GAAG,yKAAc,CAAiC;IACrF,MAAM,mBAAmB,IAAA,oLAAiB;mEAAC,IAAM,iBAAA,2BAAA,KAAM,gBAAgB;;IAEvE,MAAM,CAAC,SAAS,WAAW,GAAG,yKAAc,CAAC;IAE7C,0KAAe;yCAAC;YACd,IAAI,aAAa;gBACf;YACF;YAEA,WAAW;YACX,KAAK,mBACF,IAAI;iDAAC,CAAC;oBACL,eAAe;oBACf,WAAW;gBACb;gDACC,KAAK;iDAAC,CAAC;oBACN,4EAA4E;oBAC5E,kCAAkC;oBAClC,QAAQ,KAAK,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM;oBACxC,WAAW;gBACb;;QACJ;wCAAG,EAAE;IAEL,IAAI,SAAS;QACX,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,IAAI,CAAC,aAAa;QAChB,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,qBACE,6LAAC;kBACE,YAAY,KAAK,CAAC,GAAG,CAAC,CAAC,MAAM,sBAC5B,6LAAC;0BAAgB;eAAR;;;;;;;;;;AAIjB;IAzCgB;;QACG,0KAAO;QAEC,oLAAiB;;;MAH5B;AA2CD,SAAS;;IACtB,MAAM,EAAE,QAAQ,EAAE,UAAU,EAAE,IAAI,EAAE,GAAG,IAAA,0KAAO;IAC9C,MAAM,CAAC,cAAc,gBAAgB,GAAG,yKAAc,CAAC;IAEvD,IAAI,CAAC,UAAU;QACb,uBAAuB;QACvB,OAAO;IACT;IAEA,IAAI,CAAC,YAAY;QACf,0BAA0B;QAC1B,qBAAO,6LAAC;sBAAE;;;;;;IACZ;IAEA,qBACE;;0BACE,6LAAC;0BAAG;;;;;;YAGH,KAAK,WAAW,iBAAG,6LAAC;;;;qCAAiB,6LAAC;;;;;YAGtC,KAAK,iBAAiB,IAAI,KAAK,gBAAgB,kBAC9C,6LAAC;0BACC,cAAA,6LAAC;;wBAAE;wBAC4B;sCAC7B,6LAAC;4BAAO,SAAS,IAAM,gBAAgB;sCAAO;;;;;;;;;;;;;;;;;YAInD,8BACC;;kCACE,6LAAC;;;;;kCACD,6LAAC;wBAAO,SAAS,IAAM,gBAAgB;kCAAQ;;;;;;;;;;AAKzD;IAtCwB;;QACiB,0KAAO;;;MADxB","debugId":null}}]
}