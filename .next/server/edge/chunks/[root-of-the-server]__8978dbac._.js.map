{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server'\nimport { NextRequest, NextResponse } from 'next/server'\n\nconst isPublicRoute = createRouteMatcher([\n  \"/sign-in(.*)\",\n  \"/sign-up(.*)\",\n  \"/sso-callback(.*)\",\n  \"/session-tasks(.*)\"\n]);\n\nconst isProtectedRoute = createRouteMatcher(['/dashboard(.*)', '/org(.*)', '/user(.*)', '/'])\n\nexport default clerkMiddleware(async (auth, req: NextRequest) => {\n  const { isAuthenticated, redirectToSignIn, sessionStatus } = await auth()\n\n  // Send users with pending sessions to the /session-tasks page\n  // Handle both authenticated and unauthenticated users with pending sessions\n  if (sessionStatus === 'pending' && isProtectedRoute(req)) {\n    // Don't redirect if already on session-tasks page\n    if (!req.nextUrl.pathname.startsWith('/session-tasks')) {\n      const url = req.nextUrl.clone()\n      url.pathname = '/session-tasks'\n      return NextResponse.redirect(url)\n    }\n  }\n\n  // Send users who are not authenticated\n  // and don't have pending tasks to the sign-in page\n  if (!isAuthenticated && isProtectedRoute(req)) {\n    return redirectToSignIn()\n  }\n\n  // If it's a public route, allow access\n  if (isPublicRoute(req)) {\n    return NextResponse.next();\n  }\n\n  // User is authenticated, allow access\n  return NextResponse.next();\n})\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    \"/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)\",\n    // Always run for API routes\n    \"/(api|trpc)(.*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAEA,MAAM,gBAAgB,IAAA,wMAAkB,EAAC;IACvC;IACA;IACA;IACA;CACD;AAED,MAAM,mBAAmB,IAAA,wMAAkB,EAAC;IAAC;IAAkB;IAAY;IAAa;CAAI;uCAE7E,IAAA,wMAAe,EAAC,OAAO,MAAM;IAC1C,MAAM,EAAE,eAAe,EAAE,gBAAgB,EAAE,aAAa,EAAE,GAAG,MAAM;IAEnE,8DAA8D;IAC9D,4EAA4E;IAC5E,IAAI,kBAAkB,aAAa,iBAAiB,MAAM;QACxD,kDAAkD;QAClD,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,mBAAmB;YACtD,MAAM,MAAM,IAAI,OAAO,CAAC,KAAK;YAC7B,IAAI,QAAQ,GAAG;YACf,OAAO,gMAAY,CAAC,QAAQ,CAAC;QAC/B;IACF;IAEA,uCAAuC;IACvC,mDAAmD;IACnD,IAAI,CAAC,mBAAmB,iBAAiB,MAAM;QAC7C,OAAO;IACT;IAEA,uCAAuC;IACvC,IAAI,cAAc,MAAM;QACtB,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,sCAAsC;IACtC,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP,6EAA6E;QAC7E;QACA,4BAA4B;QAC5B;KACD;AACH"}}]
}